<!DOCTYPE html>
<html>
<head>
</head>
<body onunload="cleanup();">
<div>
  Host/Port:
  <input id="host" type="text" value="localhost">
  <input id="port" type="text" value="6200">
  <button id="connect" onclick="connect(); return false;">Connect</button>
</div>

<p id="status"></p>

<p>Use the Web Console (Ctrl+Shift+K) to poke at the <code>RIL</code> object
and see inspect debugging output</p>
<!-- TODO we have chrome privs, so can't we juts do that programmatically? -->

<script type="application/javascript;version=1.8" src="socket.js"></script>
<script type="application/javascript;version=1.8" src="ril_vars.js"></script>
<script type="application/javascript;version=1.8" src="ril_worker.js"></script>
<script type="application/javascript;version=1.8">

function connect() {
  if (SocketListener.connected) {
    SocketListener.stop();
    document.getElementById("connect").textContent = "Connect";
  } else {
    let host = document.getElementById("host").value;
    let port = document.getElementById("port").value;
    SocketListener.listen(host, port, onConnectionError);
    document.getElementById("status").textContent = "";
    document.getElementById("connect").textContent = "Disconnect";
  }
}

function onConnectionError(error) {
  document.getElementById("status").textContent = "Connection failed: " + error.message + " " + error.result;
  document.getElementById("connect").textContent = "Connect";
}

function cleanup() {
  if (SocketListener.connected) {
    SocketListener.stop();
  }
}

</script>

</body>
</html>
